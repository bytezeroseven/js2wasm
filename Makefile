all: 
	emcc ./main.c ./quickjs/quickjs.c ./quickjs/cutils.c ./quickjs/libregexp.c ./quickjs/libbf.c ./quickjs/libunicode.c -o ./out.js -DCONFIG_VERSION="\"1.0.0\"" -s WASM=1 -s MODULARIZE=1 -lm -Oz -s EXPORTED_FUNCTIONS="_malloc, _free, _bytecode, _eval, _QJS_GetNull, _QJS_GetUndefined, _QJS_GetFalse, _QJS_GetTrue, _JS_NewString, _QJS_NewNumber, _QJS_NewBigInt, _QJS_NewHostObject, _QJS_Call, _QJS_FreeValue, _QJS_DupValue, _QJS_GetNullPtr, _QJS_GetUndefinedPtr, _QJS_GetTruePtr, _QJS_GetFalsePtr, _QJS_NewNumberPtr, _QJS_NewBigIntPtr, _QJS_NewStringPtr, _QJS_NewHostObjectPtr, _QJS_DupValueOnStack" -s EXPORTED_RUNTIME_METHODS="ccall, cwrap" --llvm-lto 3 -s AGGRESSIVE_VARIABLE_ELIMINATION=1 --closure 0 --post-js ./post.js --js-library ./library.js