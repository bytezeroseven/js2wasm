<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<style>

		body {
			text-align: center;
		}

		.box {
			display: inline-flex;
			flex-direction: column;
			align-items: center;
			grid-gap: 5px;
			margin: 10px;
			padding: 5px;
			border: 2px solid #000;
		}

		.title {
			font-family: monospace;
			font-size: 18px;
			font-weight: bolder;
		}
		
		textarea {
			width: 300px;
			height: 200px;
			white-space: nowrap;
		}

	</style>
</head>
<body>
	<script src="generate.js"></script>
	<script>
		
		function displayCode(name, code) {
			const box = document.createElement('div');
			box.className = 'box';

			const title = document.createElement('div');
			title.className = 'title';
			title.innerText = name;
			box.appendChild(title);

			const textarea = document.createElement('textarea');
			textarea.value = code;
			box.appendChild(textarea);
	
			document.body.appendChild(box);
		}

		displayCode('extern return', generateExterns('return'));
		displayCode('extern prop', generateExterns('prop', 'int32_t id, char* prop'));
		displayCode('extern arg', generateExterns('arg'));

		displayCode('lib return', generateLibrary('return', x => `returnValue = ${x};`));
		displayCode('lib prop', generateLibrary('prop', x => 'hostObjects[id].object[UTF8ToString(prop)] = ' + x + ';', 'id, prop'));
		displayCode('lib arg', generateLibrary('arg', x => `args.push(${x});`));

		displayCode('HostObject', toCString(HostObjectCode));

		displayCode('type return', generateType('return', ''));
		displayCode('type prop', generateType('prop', 'id, prop'));
		displayCode('type arg', generateType('arg', ''));

	</script>
</body>
</html>